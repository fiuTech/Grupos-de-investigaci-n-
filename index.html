<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Grupos de Investigación</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="container py-4">
  <h1 class="mb-4">Gestión de Grupos de Investigación</h1>

  <!--listado de los grupos-->
  <button id="btnCargar" class="btn btn-primary mb-3">Cargar Grupos</button>
  <ul id="listaGrupos" class="list-group mb-4"></ul>

  <!--formulario registrar docente-->
  <h2>Registrar Docente</h2>
  <form id="formDocente" class="mb-4">
    <input type="text" class="form-control mb-2" name="nombre" placeholder="Nombre docente" required>
    <input type="text" class="form-control mb-2" name="formacion" placeholder="Formación académica" required>
    <input type="text" class="form-control mb-2" name="horario" placeholder="Horario de atención" required>
    <select class="form-control mb-2" name="grupo" required>
      <option value="COMBA I+D">COMBA I+D</option>
      <option value="GIEIAM">GIEIAM</option>
    </select>
    <button type="submit" class="btn btn-success">Registrar</button>
  </form>

  <!--formulario vincular estudiante-->
  <h2>Vincular Estudiante</h2>
  <form id="formEstudiante" class="mb-4">
    <input type="text" class="form-control mb-2" name="nombre" placeholder="Nombre estudiante" required>
    <input type="text" class="form-control mb-2" name="codigo" placeholder="Código estudiante" required>
    <input type="text" class="form-control mb-2" name="carrera" placeholder="Carrera" required>
    <select class="form-control mb-2" name="semillero" required>
      <option value="Semillero COMBA">Semillero COMBA</option>
      <option value="Semillero INFORMA">Semillero INFORMA</option>
    </select>
    <button type="submit" class="btn btn-primary">Vincular Estudiante</button>
  </form>

  <!--formulario actividad semillero-->
  <h2>Agregar Actividad</h2>
  <form id="formActividad" class="mb-4">
    <input type="text" class="form-control mb-2" name="nombre" placeholder="Nombre actividad" required>
    <input type="datetime-local" class="form-control mb-2" name="fecha" required>
    <input type="number" class="form-control mb-2" name="limite" placeholder="Límite de asistentes" required>
    <textarea class="form-control mb-2" name="resumen" placeholder="Resumen de la actividad" required></textarea>
    <button type="submit" class="btn btn-warning">Agregar Actividad</button>
  </form>

  <script>
    const listaGrupos = document.getElementById("listaGrupos");
    const btnCargar = document.getElementById("btnCargar");
    const formDocente = document.getElementById("formDocente");
    const formEstudiante = document.getElementById("formEstudiante");
    const formActividad = document.getElementById("formActividad");

    // GET para cargar grupos
    btnCargar.addEventListener("click", () => {
      const grupos = [
        { nombre: "COMBA I+D", descripcion: "Investigación en computación aplicada, big data, analítica.", director: "Dra. Andrea Rodríguez" },
        { nombre: "GIEIAM", descripcion: "Estudio de inteligencia artificial, mecatrónica y automatización.", director: "Dr. Luis Pérez" }
      ];
      listaGrupos.innerHTML = "";
      grupos.forEach(grupo => {
        const li = document.createElement("li");
        li.classList.add("list-group-item");
        li.innerHTML = `<strong>${grupo.nombre}</strong><br><small>${grupo.descripcion}</small><br><em>Director: ${grupo.director}</em>`;
        listaGrupos.appendChild(li);
      });
    });

    // POST de docentes
    formDocente.addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData(formDocente);
      const docente = {
        nombre: formData.get("nombre"),
        formacion: formData.get("formacion"),
        horario: formData.get("horario"),
        grupo: formData.get("grupo"),
      };

      try {
        const response = await fetch("https://jsonplaceholder.typicode.com/posts", {
          method: "POST",
          body: JSON.stringify(docente),
          headers: {
            "Content-Type": "application/json; charset=UTF-8"
          }
        });
        const data = await response.json();
        console.log("Docente registrado:", data);
        alert("Docente registrado con éxito.");
        formDocente.reset();
      } catch (error) {
        console.error("Error al registrar docente:", error);
      }
    });

    // POST de estudiante
    formEstudiante.addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData(formEstudiante);
      const estudiante = {
        nombre: formData.get("nombre"),
        codigo: formData.get("codigo"),
        carrera: formData.get("carrera"),
        semillero: formData.get("semillero"),
      };

      try {
        const response = await fetch("https://jsonplaceholder.typicode.com/posts", {
          method: "POST",
          body: JSON.stringify(estudiante),
          headers: {
            "Content-Type": "application/json; charset=UTF-8"
          }
        });
        const data = await response.json();
        console.log("Estudiante vinculado:", data);
        alert("Estudiante vinculado correctamente.");
        formEstudiante.reset();
      } catch (error) {
        console.error("Error al vincular estudiante:", error);
      }
    });

    // POST de actividad
    formActividad.addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData(formActividad);
      const actividad = {
        nombre: formData.get("nombre"),
        fecha: formData.get("fecha"),
        limite: formData.get("limite"),
        resumen: formData.get("resumen"),
      };

      try {
        const response = await fetch("https://jsonplaceholder.typicode.com/posts", {
          method: "POST",
          body: JSON.stringify(actividad),
          headers: {
            "Content-Type": "application/json; charset=UTF-8"
          }
        });
        const data = await response.json();
        console.log("Actividad agregada:", data);
        alert("Actividad agregada con éxito.");
        formActividad.reset();
      } catch (error) {
        console.error("Error al agregar actividad:", error);
      }
    });
  </script>
</body>
</html>
